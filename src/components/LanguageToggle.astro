<div class="lang-toggle" aria-label="Language selector">
  <button
    type="button"
    class="lang-pill"
    data-lang-choice="es"
    aria-label="EspaÃ±ol"
  >
    <span aria-hidden="true">ðŸ‡ªðŸ‡¸</span>
  </button>
  <button
    type="button"
    class="lang-pill"
    data-lang-choice="en"
    aria-label="English"
  >
    <span aria-hidden="true">ðŸ‡¬ðŸ‡§</span>
  </button>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const root = document.documentElement;
    const buttons = Array.from(
      document.querySelectorAll<HTMLButtonElement>("[data-lang-choice]")
    );

    const updateActive = () => {
      const current = root.dataset.lang || "es";
      buttons.forEach((btn) => {
        if (btn.dataset.langChoice === current) {
          btn.classList.add("is-active");
        } else {
          btn.classList.remove("is-active");
        }
      });
    };

    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.langChoice;
        if (!lang) return;
        (window as any).setLanguage?.(lang);
        updateActive();
      });
    });

    updateActive();
  });
</script>

<style is:global>
  .lang-toggle {
    display: inline-flex;
    align-items: center;
    padding: 0.15rem;
    border-radius: 9999px;
    background-color: rgba(15, 23, 42, 0.85);
    border: 1px solid rgba(148, 163, 184, 0.45);
    box-shadow: 0 18px 60px rgba(15, 23, 42, 0.7);
    backdrop-filter: blur(14px);
    gap: 0.1rem;
  }

  .lang-pill {
    border-radius: 9999px;
    font-size: 0.8rem;
    padding: 0.12rem 0.5rem;
    color: #e5e7eb;
    background: transparent;
    border: none;
    cursor: pointer;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    transition:
      background-color 0.2s ease,
      color 0.2s ease,
      transform 0.15s ease;
  }

  .lang-pill:hover {
    transform: translateY(-1px);
  }

  .lang-pill.is-active {
    background: #e5e7eb;
    color: #020617;
    box-shadow: 0 0 18px rgba(148, 163, 184, 0.6);
  }
</style>
